@using SistemaCapacitacion.Core.ViewModels
@model DashboardEmployeeViewModel

@{
    ViewData["Title"] = "Mi Panel de Aprendizaje";
    Layout = "~/Views/_LayoutEmployee.cshtml";
}

<div class="welcome-box">
    <h1>Hola, @User.Identity.Name ðŸ‘‹</h1>
    <p>
        Tienes
        <span class="highlight">@Model.MyCourses.Count(c => c.ProgressPercent < 100) cursos pendientes</span>
        por completar este mes.
    </p>
</div>

<h3 class="section-title">Mis Cursos Asignados</h3>

<div class="course-grid">
    @if (!Model.MyCourses.Any())
    {
        <p>No tienes cursos asignados todavÃ­a.</p>
    }
    else
    {
        foreach (var course in Model.MyCourses)
        {
            <div class="course-card">
                <div class="course-thumb">
                    @if (course.ProgressPercent == 0)
                    {
                        <div class="course-status-pill course-status-new">Asignado</div>
                    }
                    else if (course.ProgressPercent < 100)
                    {
                        <div class="course-status-pill course-status-progress">En progreso</div>
                    }
                    else
                    {
                        <div class="course-status-pill course-status-completed">Completado</div>
                    }
        </div>

        <div class="course-body">
            <h4 class="course-title">@course.Title</h4>
            <p class="course-meta">CategorÃ­a: @course.Category</p>

            <div class="progress-section">
                <span class="progress-label">Progreso: @course.ProgressPercent%</span>

                <div class="progress-track">
                    <div class="progress-fill" style="width:@course.ProgressPercent%"></div>
                </div>

               <a asp-controller="Empleado"
   asp-action="VerCurso"
   asp-route-id="@course.CourseId"
   class="btn-course-primary w-100
   @(course.ProgressPercent == 0 ? "btn-start" :
     course.ProgressPercent < 100 ? "btn-resume" :
     "btn-finish")">

    @(course.ProgressPercent == 0 ? "Iniciar Curso" :
      course.ProgressPercent < 100 ? "Reanudar Curso" :
      "Ver Certificado")
</a>
                    </div>
                </div>
            </div>
        }
    }
</div>
