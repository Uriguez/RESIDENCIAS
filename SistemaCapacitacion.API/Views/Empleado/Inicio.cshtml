@model List<EmployeeCourseViewModel>

@{
    ViewData["Title"] = "Mi Panel de Aprendizaje";
    Layout = "~/Views/_LayoutEmployee.cshtml";
}

<!-- HEADER BIENVENIDA -->
<div class="welcome-box">
    <h1>Hola, @User.Identity.Name ðŸ‘‹</h1>
    <p>
        Tienes <span class="highlight">@Model.Count cursos pendientes</span>
        por completar este mes.
    </p>

    <div class="welcome-actions">
        <a asp-controller="Courses" asp-action="MyCourses" class="btn-welcome-primary">
            Continuar aprendiendo
        </a>
        <a asp-controller="Courses" asp-action="Catalog" class="btn-welcome-secondary">
            Ver catÃ¡logo
        </a>
    </div>
</div>

<h3 class="section-title">Mis Cursos Asignados</h3>

<!-- GRID DE CURSOS DESDE BD -->
<div class="course-grid">

    @if (!Model.Any())
    {
        <p>No tienes cursos asignados todavÃ­a.</p>
    }
    else
    {
        foreach (var course in Model)
        {
            <div class="course-card">
                <div class="course-thumb">
                    @if (course.IsRequired)
                    {
                        <div class="course-status-pill course-status-progress">Obligatorio</div>
                    }
                    else
                    {
                        <div class="course-status-pill course-status-new">Opcional</div>
                    }
                </div>

                <div class="course-body">
                    <h4 class="course-title">@course.Title</h4>
                    <p class="course-meta">@course.Description</p>

                    <div class="progress-section">
                        <span class="progress-label">Progreso: @course.Progress%</span>

                        <div class="progress-track">
                            <div class="progress-fill" style="width:@course.Progress%"></div>
                        </div>

                        @if (course.Progress == 100)
                        {
                            <a asp-controller="Courses" asp-action="Certificate" asp-route-id="@course.IdCourse"
                               class="btn-course-primary w-100">
                                Descargar Certificado
                            </a>
                        }
                        else
                        {
                            <a asp-controller="Courses" asp-action="Start" asp-route-id="@course.IdCourse"
                               class="btn-course-primary w-100">
                                @(course.Progress == 0 ? "Iniciar Curso" : "Reanudar Curso")
                            </a>
                        }
                    </div>
                </div>
            </div>
        }
    }

</div>
