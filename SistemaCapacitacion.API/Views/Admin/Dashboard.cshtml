@model SistemaCapacitacion.Core.ViewModels.DashboardAdminViewModel
@{
    //Layout = "_LayoutAdmin";
}

<!-- Dashboard.cshtml dentro de Admin -->
<section class="admin-main-section">
    <header class="admin-header">
        <h1 class="admin-page-title">Dashboard Griver</h1>
        <p class="admin-page-subtitle">
            Bienvenido, Administrador Griver · Resumen general del sistema de
            capacitación.
        </p>
    </header>

    <!-- MÉTRICAS PRINCIPALES (fila superior) -->
    <div class="metric-grid">
        <article class="card metric-card">
            <div class="metric-card__label">
                <span class="metric-card__icon">👥</span>
                <span>Usuarios Totales</span>
            </div>
            <div class="metric-card__value">
                @Model.TotalUsers
            </div>
            <div class="metric-card__delta metric-card__delta--up">
                ↑ @Model.UsersDelta% este mes
            </div>
        </article>

        <article class="card metric-card">
            <div class="metric-card__label">
                <span class="metric-card__icon">📚</span>
                <span>Cursos Activos</span>
            </div>
            <div class="metric-card__value">
                @Model.ActiveCourses
            </div>
            <div class="metric-card__delta metric-card__delta--up">
                ↑ @Model.CoursesDelta% este trimestre
            </div>
        </article>

        <article class="card metric-card">
            <div class="metric-card__label">
                <span class="metric-card__icon">✅</span>
                <span>Tasa de Finalización</span>
            </div>
            <div class="metric-card__value">
                @Model.CompletionRate%
            </div>
            <div class="metric-card__delta">
                @Model.CompletionDeltaText
            </div>
        </article>

        <article class="card metric-card">
            <div class="metric-card__label">
                <span class="metric-card__icon">🎓</span>
                <span>Certificados Emitidos</span>
            </div>
            <div class="metric-card__value">
                @Model.CertificatesIssued
            </div>
            <div class="metric-card__delta metric-card__delta--up">
                ↑ @Model.CertificatesDelta% este mes
            </div>
        </article>
    </div>

    <!-- FILA: ACTIVIDAD RECIENTE + ACCIONES RÁPIDAS -->
    <div class="grid-2-columns"
         style="display: grid; grid-template-columns: 2fr 1.2fr; gap: 16px; margin-bottom: 18px;">
        <!-- ACTIVIDAD RECIENTE -->
        <article class="card activity-card">
            <header class="card__header">
                <h2 class="card__title">Actividad Reciente</h2>
                <p class="card__subtitle">
                    Últimas acciones en el sistema de capacitación Griver.
                </p>
            </header>

            <ul class="activity-list">
                @foreach (var item in Model.RecentActivities)
                {
                    <li class="activity-item">
                        <div class="activity-item__left">
                            <span class="activity-item__badge">@item.Initials</span>
                        </div>

                        <div class="activity-item__content">
                            <div class="activity-item__title">@item.Title</div>
                            <div class="activity-item__meta">@item.Description</div>
                            <div class="activity-item__time">@item.TimeAgo</div>
                        </div>
                    </li>
                }
            </ul>
        </article>

        <!-- ACCIONES RÁPIDAS -->
        <article class="card quick-actions-card">
            <div class="admin-section-header">
                <div>
                    <div class="admin-section-title">
                        Acciones Rápidas
                    </div>
                    <div class="admin-section-caption">
                        Tareas frecuentes para la gestión del sistema Griver.
                    </div>
                </div>
            </div>

            <div class="quick-actions-grid">
                <button class="quick-action"
                        type="button"
                        data-open-modal="modalNuevoUsuario">
                    <div class="quick-action__title">Agregar Usuario</div>
                    <div class="quick-action__caption">
                        Crear nuevo empleado o trainee.
                    </div>
                </button>

                <button class="quick-action"
                        type="button"
                        id="btnExportReports">
                    <div class="quick-action__title">
                        Exportar Reportes
                    </div>
                    <div class="quick-action__caption">
                        Descargar métricas y analíticas.
                    </div>
                </button>

                <button class="quick-action"
                        type="button"
                        data-open-modal="modalNuevoCurso">
                    <div class="quick-action__title">Crear Curso</div>
                    <div class="quick-action__caption">
                        Diseñar nuevo curso de capacitación.
                    </div>
                </button>

                <a class="quick-action"
                   href="/Admin/Settings">
                    <div class="quick-action__title">
                        Configuración Sistema
                    </div>
                    <div class="quick-action__caption">
                        Ajustar parámetros globales.
                    </div>
                </a>
            </div>
        </article>
    </div>

    <!-- MÉTRICAS AVANZADAS (resumen) -->
    <article class="card" style="padding: 14px 18px;">
        <div class="admin-section-header">
            <div>
                <div class="admin-section-title">
                    Métricas Avanzadas
                </div>
                <div class="admin-section-caption">
                    Indicadores clave de rendimiento del sistema de
                    capacitación.
                </div>
            </div>
        </div>

        <div class="simple-metrics-grid">
            <div class="simple-metric">
                <div class="simple-metric__label">
                    Engagement Score
                </div>
                <div class="simple-metric__value">
                    @Model.EngagementScore
                </div>
                <div class="progress-bar" style="margin-top: 6px;">
                    <div class="progress-bar__fill"
                         style="width:@Model.EngagementScore%"></div>
                </div>
            </div>

            <div class="simple-metric">
                <div class="simple-metric__label">
                    Features/Sprint (Cursos nuevos)
                </div>
                <div class="simple-metric__value">
                    @Model.CoursesPerSprint
                </div>
                <div class="progress-bar" style="margin-top: 6px;">
                    <div class="progress-bar__fill"
                         style="width:@Model.CoursesPerSprintPercent%"></div>
                </div>
            </div>

            <div class="simple-metric">
                <div class="simple-metric__label">
                    Flow Efficiency
                </div>
                <div class="simple-metric__value">
                    @Model.FlowEfficiency%
                </div>
                <div class="progress-bar" style="margin-top: 6px;">
                    <div class="progress-bar__fill"
                         style="width:@Model.FlowEfficiency%"></div>
                </div>
            </div>

            <div class="simple-metric">
                <div class="simple-metric__label">
                    Promedio de Progreso
                </div>
                <div class="simple-metric__value">
                    @Model.GlobalProgress%
                </div>
                <div class="progress-bar" style="margin-top: 6px;">
                    <div class="progress-bar__fill"
                         style="width:@Model.GlobalProgress%"></div>
                </div>
            </div>
        </div>
    </article>
</section>
